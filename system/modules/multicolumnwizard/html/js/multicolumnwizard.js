var MultiColumnWizard={execute:function(c,d,a){var l=$(a);var g=l.getFirst().getNext();var k=$(c).getParent("tr");var n={maxCount:l.getProperty("rel").match(/maxCount\[[0-9]+\]/ig)[0].replace("maxCount[","").replace("]","").toInt(),uniqueFields:l.getProperty("rel").match(/unique\[[a-z0-9,]*\]/ig)[0].replace("unique[","").replace("]","").split(","),};if(window.Backend){Backend.getScrollOffset()}MultiColumnWizard[d](g,k,n);var m=g.getChildren();for(var f=0;f<m.length;f++){var h=m[f].getChildren();for(var e=0;e<h.length;e++){var b=h[e].getChildren();MultiColumnWizard.updateAttributes(b,f)}}},copy:function(b,f,a){var h=new Element("tr");var g=f.getChildren();for(var c=0;c<g.length;c++){var e=g[c].clone(true,true).injectInside(h);e.getFirst().value=g[c].getFirst().value}h.injectAfter(f);if(a.maxCount<=b.getChildren().length&&a.maxCount!=0){b.getElements("img[src=system/themes/default/images/copy.gif]").setStyle("display","none")}if(a.uniqueFields.length>1||a.uniqueFields[0]!=""){for(var c=0;c<a.uniqueFields.length;c++){var d=h.getElements("*[name*=["+a.uniqueFields[c]+"]]");if(d){MultiColumnWizard.clearElementValue(d)}}}},up:function(b,c,a){c.getPrevious()?c.injectBefore(c.getPrevious()):c.injectInside(b)},down:function(b,c,a){c.getNext()?c.injectAfter(c.getNext()):c.injectBefore(b.getFirst())},"delete":function(b,d,a){if(b.getChildren().length>1){d.destroy()}else{var e=d.getElements("input,select,textarea");for(var c=0;c<e.length;c++){MultiColumnWizard.clearElementValue(e[c])}}if(a.maxCount>b.getChildren().length){b.getElements("img[src=system/themes/default/images/copy.gif]").setStyle("display","inline")}},updateAttributes:function(a,b){a.each(function(d){if(d.name!=undefined&&d.name!=null&&d.name!=""){var c=d.name.substring(0,d.name.indexOf("["));d.name=d.name.replace(new RegExp(c+"[[0-9]+]","ig"),c+"["+b+"]")}$H(d.getProperties("for","id","onclick")).each(function(f,e){if(f!=undefined&&f!=null&&f!=""){d.setProperty(e,f.replace(/_row[0-9]+_/ig,"_row"+b+"_"))}});if(d.getChildren().length>0){MultiColumnWizard.updateAttributes(d.getChildren(),b)}})},clearElementValue:function(a){if(a.get("type")=="checkbox"||a.get("type")=="radio"){a.checked=false}else{a.set("value","")}}};