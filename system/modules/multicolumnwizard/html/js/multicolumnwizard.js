var MultiSelect={changeNamerecursive:function(a,b){a.each(function(d){if(d.name!=undefined&&d.name!=null&&d.name!=""){var c=d.name.substring(0,d.name.indexOf("["));d.name=d.name.replace(new RegExp(c+"[[0-9]+]","ig"),c+"["+b+"]")}$H(d.getProperties("for","id","onclick")).each(function(f,e){if(f!=undefined&&f!=null&&f!=""){d.setProperty(e,f.replace(/_row[0-9]+_/ig,"_row"+b+"_"))}});if(d.getChildren().length>0){MultiSelect.changeNamerecursive(d.getChildren(),b)}})},moduleWizard:function(c,e,a){var o=$(a);var h=o.getFirst().getNext();var n=$(c).getParent("tr");var p=h.getChildren();var d=o.getProperty("rel").match(/\[[0-9]+\]/ig)[0].replace("[","").replace("]","").toInt();if(window.Backend){Backend.getScrollOffset()}switch(e){case"copy":var m=new Element("tr");var l=n.getChildren();for(var g=0;g<l.length;g++){var k=l[g].clone(true,true).injectInside(m);k.getFirst().value=l[g].getFirst().value}m.injectAfter(n);if(d<=h.getChildren().length&&d!=0){console.log(h.getChildren().length);h.getElements("img[src=system/themes/default/images/copy.gif]").setStyle("display","none")}break;case"up":n.getPrevious()?n.injectBefore(n.getPrevious()):n.injectInside(h);break;case"down":n.getNext()?n.injectAfter(n.getNext()):n.injectBefore(h.getFirst());break;case"delete":if(p.length>1){n.destroy()}else{var l=n.getElements("input","select","textarea");for(var g=0;g<l.length;g++){l[g].set("value","")}}if(d>h.getChildren().length){h.getElements("img[src=system/themes/default/images/copy.gif]").setStyle("display","inline")}break}p=h.getChildren();for(var g=0;g<p.length;g++){var l=p[g].getChildren();for(var f=0;f<l.length;f++){var b=l[f].getChildren();MultiSelect.changeNamerecursive(b,g)}}}};